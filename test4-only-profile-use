## using aws instance profile

export AWS_ACCESS_KEY_ID=$(curl -s http://169.254.169.254/latest/meta-data/iam/security-credentials/<instance_profile_name> | jq -r '.AccessKeyId')
export AWS_SECRET_ACCESS_KEY=$(curl -s http://169.254.169.254/latest/meta-data/iam/security-credentials/<instance_profile_name> | jq -r '.SecretAccessKey')
export AWS_SESSION_TOKEN=$(curl -s http://169.254.169.254/latest/meta-data/iam/security-credentials/<instance_profile_name> | jq -r '.Token')



## WINDOWS:
$profileUrl = Invoke-RestMethod -Uri http://169.254.169.254/latest/meta-data/iam/security-credentials/<instance_profile_name>
$profile = Invoke-RestMethod -Uri $profileUrl
$Env:AWS_ACCESS_KEY_ID = $profile.AccessKeyId
$Env:AWS_SECRET_ACCESS_KEY = $profile.SecretAccessKey
$Env:AWS_SESSION_TOKEN = $profile.Token
